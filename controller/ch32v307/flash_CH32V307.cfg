# OpenOCD flash.cfg

source ch32v307/wch-riscv.cfg

init

reset halt

#flash list

#halt

flash erase_sector wch_riscv 0 last

# Flash 1: Needs erased memory
#flash write_bank bank_id filename [offset]
#flash write_bank 0 build/TrackingController.bin 0

# Flash 2: Needs halted target (reset init)
#flash write_image [erase] [unlock] filename [offset [file_type]]
#flash write_image erase build/TrackingController.bin 0x80000000

# Flash 3: Does everything automagically, sometimes doesn't work
# program <filename> [address] [pre-verify] [verify] [reset] [exit]
program build/TrackingController.bin verify

reset run
exit